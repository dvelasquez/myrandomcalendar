---
globs: *.astro,*.tsx
alwaysApply: false
---
# ShadCN UI Component Guidelines

## üé® **ShadCN Component Standards**

### **Component Priority**
1. **Use ShadCN components first** - Always prefer over custom styling
2. **Use TailwindCSS utilities** for layout and spacing
3. **Use custom components** only when ShadCN doesn't provide the functionality

### **Import Patterns**
```typescript
import { Button } from '@/components/ui/button';
import ButtonLink from '@/components/ui/button-link';
```

## üîò **Button Component Rules (CRITICAL)**

### **Component Selection**
- **`<Button>`** - For all `<button>` elements
- **`<ButtonLink>`** - For all `<a>` tags styled as buttons
- **Never** use custom button styling

### **Variant Selection**
- `default` - Primary actions (create, submit, main CTAs)
- `secondary` - Secondary actions (back, cancel, navigation)  
- `destructive` - Delete, remove, dangerous actions
- `outline` - Alternative actions, form cancel buttons
- `ghost` - Subtle actions, close buttons, icon buttons
- `link` - Text links within content

### **Size Guidelines**
- `default` - Standard buttons (most common)
- `sm` - Small buttons (edit, delete actions in lists)
- `lg` - Large buttons (hero CTAs, important actions)
- `icon` - Icon-only buttons (close, menu, etc.)

### **Usage Examples**
```typescript
// ‚úÖ Primary actions
<Button type="submit">Create Event</Button>
<ButtonLink href="/create">Add New</ButtonLink>

// ‚úÖ Secondary actions
<Button variant="secondary">Cancel</Button>
<ButtonLink variant="secondary" href="/back">Back</ButtonLink>

// ‚úÖ Destructive actions
<Button variant="destructive">Delete</Button>
<Button variant="destructive" size="sm">Remove</Button>

// ‚úÖ Alternative actions
<Button variant="outline">Edit</Button>
<ButtonLink variant="outline" href="/edit">Modify</ButtonLink>

// ‚úÖ Subtle actions
<Button variant="ghost" size="icon">√ó</Button>
<Button variant="ghost">Close</Button>

// ‚úÖ Text links
<ButtonLink variant="link" href="/login">Sign in</ButtonLink>
```

## üé® **Styling Guidelines**

### **Component Styling**
- **Use ShadCN variants** instead of custom CSS
- **Use TailwindCSS utilities** for layout and spacing
- **Never override ShadCN component styles**
- **Compose components** rather than modifying them

### **Prop Usage**
- **React components**: Use `className` prop
- **Astro/HTML elements**: Use `class` prop
- **Pass styling props correctly** to React components

```typescript
// ‚úÖ CORRECT: React component styling
<Button className="w-full" variant="outline">
  Full Width Button
</Button>

// ‚úÖ CORRECT: Astro HTML styling
<div class="flex items-center space-x-4">
  <input class="px-3 py-2 border rounded-md" />
</div>
```

## üö´ **Anti-Patterns (NEVER DO)**

### **Custom Button Styling**
```typescript
// ‚ùå NEVER DO THIS
<button className="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
  Click me
</button>

<a className="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">
  Link button
</a>

// ‚úÖ DO THIS INSTEAD
<Button>Click me</Button>
<ButtonLink href="/path">Link button</ButtonLink>
```

### **Style Overrides**
```typescript
// ‚ùå NEVER DO THIS
<Button className="bg-red-500 hover:bg-red-600">
  Custom styled button
</Button>

// ‚úÖ DO THIS INSTEAD
<Button variant="destructive">
  Properly styled button
</Button>
```

## üîó **Astro Integration Patterns**

### **Form Buttons**
```astro
<!-- ‚úÖ CORRECT: Form submission -->
<form method="POST" action={action}>
  <Button type="submit" className="w-full">
    {editing ? 'Update' : 'Create'}
  </Button>
</form>
```

### **Navigation Buttons**
```astro
<!-- ‚úÖ CORRECT: Navigation -->
<div class="flex space-x-4">
  <ButtonLink href="/calendar">Calendar</ButtonLink>
  <ButtonLink variant="secondary" href="/schedule">Schedule</ButtonLink>
</div>
```

### **Action Buttons**
```astro
<!-- ‚úÖ CORRECT: Actions in lists -->
<div class="flex space-x-2">
  <ButtonLink variant="outline" size="sm" href={`/edit/${item.id}`}>
    Edit
  </ButtonLink>
  <Button variant="destructive" size="sm">
    Delete
  </Button>
</div>
```

## üìã **Component Checklist**

Before adding any button or interactive element:

- [ ] Is this a `<button>` element? ‚Üí Use `<Button>`
- [ ] Is this a `<a>` tag styled as button? ‚Üí Use `<ButtonLink>`
- [ ] Does the action match the variant? ‚Üí Choose appropriate variant
- [ ] Is the size appropriate? ‚Üí Choose appropriate size
- [ ] Are imports correct? ‚Üí Use proper import paths
- [ ] Is styling using props correctly? ‚Üí `className` for React, `class` for Astro

## üìù **Form Management Patterns (PROVEN)**

### **Form Component Decision Matrix**
- **Simple Forms** (1-3 fields): Use ShadCN components directly in Astro
- **Complex Forms** (4+ fields, validation, dynamic behavior): Use React component with `client:load`
- **Forms with complex state**: Always use React component
- **Forms with server actions**: Use React component with dynamic action imports

### **ShadCN Form Components**
```typescript
// ‚úÖ Form inputs with ShadCN
<Input 
  type="text" 
  name="title" 
  defaultValue={initialData?.title || ''} 
  className="w-full"
  required 
/>

<Textarea 
  name="description" 
  defaultValue={initialData?.description || ''} 
  className="w-full"
  rows={3}
/>

<Select name="category" defaultValue={initialData?.category || 'default'} required>
  <SelectTrigger className="w-full">
    <SelectValue placeholder="Select category" />
  </SelectTrigger>
  <SelectContent>
    {formOptions.categories.map((option) => (
      <SelectItem key={option.value} value={option.value}>
        {option.label}
      </SelectItem>
    ))}
  </SelectContent>
</Select>

<Checkbox 
  name="isActive" 
  defaultChecked={initialData?.isActive ?? true}
  className="mr-2"
/>
```

### **Complex Form Pattern**
```typescript
// ‚úÖ React form component with client:load
export default function FeatureForm({ initialData, formOptions }: FormProps) {
  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    const formData = new FormData(e.currentTarget as HTMLFormElement);
    
    try {
      const { actions } = await import('astro:actions');
      const result = await actions.feature.action(formData);
      
      if (!result.error) {
        window.location.href = '/success-page';
      } else {
        alert('Error: ' + result.error.message);
      }
    } catch (error) {
      alert('Form submission failed. Please try again.');
    }
  };

  return (
    <form onSubmit={handleSubmit} className="space-y-6">
      {/* ShadCN form fields */}
    </form>
  );
}
```

### **Type Reuse Pattern**
```typescript
// ‚úÖ DO THIS: Reuse existing feature types
import type { FeatureType } from '@/features/feature/models/Feature.types';
import type { PageData } from '@/features/feature/services/page-handler';

interface FormProps {
  initialData?: Partial<FeatureType>;
  formOptions: PageData['formOptions'];
}
```

## üéØ **Future ShadCN Components**

When adding new ShadCN components, follow these patterns:

### **Component Installation**
```bash
npx shadcn@latest add [component-name]
```

### **Usage Guidelines**
- Follow the same import patterns as Button components
- Use variants and sizes instead of custom styling
- Compose components rather than overriding styles
- Maintain accessibility features

### **Examples for Future Components**
```typescript
// Card components
<Card>
  <CardHeader>
    <CardTitle>Title</CardTitle>
  </CardHeader>
  <CardContent>
    Content
  </CardContent>
</Card>

// Input components
<Input type="email" placeholder="Enter email" />
<Label htmlFor="email">Email</Label>

// Alert components
<Alert>
  <AlertTitle>Title</AlertTitle>
  <AlertDescription>Description</AlertDescription>
</Alert>
```

## üö® **Critical Rules Summary**

1. **ALWAYS use ShadCN components** for UI elements
2. **NEVER use custom button styling** - use Button/ButtonLink components
3. **Choose variants semantically** - match variant to action type
4. **Import correctly** - use proper import paths for file type
5. **Use proper props** - `className` for React, `class` for Astro
6. **Compose, don't override** - use variants instead of custom CSS
7. **Maintain accessibility** - ShadCN components include built-in accessibility features