---
import BaseLayout from './BaseLayout.astro';
import Navigation from '@/components/Navigation';

export interface Props {
  title?: string;
  description?: string;
}

const { title = 'My Random Calendar', description } = Astro.props;

// Get user from middleware
const { user } = Astro.locals;

if (!user || !user.id) {
  return Astro.redirect('/');
}

// Get current path for active link highlighting
const currentPath = Astro.url.pathname;
---

<BaseLayout {title} {description}>
  <Navigation {user} {currentPath} client:load />

  <main class="flex-1">
    <slot />
  </main>
</BaseLayout>
